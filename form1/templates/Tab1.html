{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
    <link rel="stylesheet" href="{% static 'style.css' %}" />

    <title>bootstrap-forms</title>
  </head>

  <body>
    <form  method="post"> {% csrf_token %}
    <nav class="bg-blue-100 fs-6 nav-padding py-3"> {{ user_email }} (GH: {{ user_id }})
      {% comment %} <button class="btn btn-outline-secondary bg-red fw-bolder ms-auto logout">Logout</button> {% endcomment %}
      <a href="{% url 'login' %}" class="btn btn-outline-secondary bg-red fw-bolder ms-auto logout">Logout</a>

    </nav>
    <div class="grid mb-5">
      <div class="width-10">
        <div class="border-custom tab-custom-style p-4">
          <div role="button" class="mb-2 tab-active cursor-pointer">Tab 1</div>
          <div role="button" class="mb-2 tab-normal">Tab 2</div>
          <div role="button" class="tab-normal">Tab 3</div>
        </div>
      </div>
      <div class="width-60">
        <div class="d-flex justify-content-between">

          {% comment %} <div class="form-check form-switch">
            <label class="form-check-label fs-6 text-dark" for="flexSwitchCheckChecked">Auto Save</label>
            <input class="form-check-input" type="checkbox" id="flexSwitch" checked />
          </div> {% endcomment %}


          <div>
            <div class="dropdown d-inline">
              <button class="btn btn-outline-secondary dropdown-toggle custom-dropdown" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false"> Select ID </button>
              <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
                  <li>
                      <a class="dropdown-item" href="#" onclick="selectDropdownItem('1')">1</a>
                  </li>
                  <li>
                      <a class="dropdown-item" href="#" onclick="selectDropdownItem('2')">2</a>
                  </li>
                  <li>
                      <a class="dropdown-item" href="#" onclick="selectDropdownItem('3')">3</a>
                  </li>
              </ul>
          </div>

          <button type="button" class="btn btn-outline-secondary bg-yellow fw-bolder" id="editButton">Edit</button>
          <button type="button" class="btn btn-outline-secondary bg-green fw-bolder" id="saveButton" style="display: none;">Save</button>
          <button type="button" class="btn btn-outline-secondary fw-bolder" id="cancelButton" style="display: none;">Cancel</button>


            {% comment %} <svg id="deleteButton" xmlns="http://www.w3.org/2000/svg" width="14" height="18" viewBox="0 0 14 18" fill="none" class="mx-3">
              <path d="M14 1H10.5L9.5 0H4.5L3.5 1H0V3H14M1 16C1 16.5304 1.21071 17.0391 1.58579 17.4142C1.96086 17.7893 2.46957 18 3 18H11C11.5304 18 12.0391 17.7893 12.4142 17.4142C12.7893 17.0391 13 16.5304 13 16V4H1V16Z" fill="black" />
            </svg> {% endcomment %}

            <button type="button" class="btn btn-outline-secondary bg-blue-200 fw-bolder"> New </button>
          </div>
        </div>
        <div class="mt-4 border-custom p-4 pb-5">

          <div class="mb-5">
            <p class="fw-bolder"> Form ID : Give a random number <span class="fw-normal"></span>
            </p>

            <input type="number" name="digit" class="form-control width-200 border-radius" id="isd" aria-describedby="idHelp" placeholder="ID" pattern="\d*" />

            {% comment %} <div id="idlHelp" class="form-text text-danger">Error message</div> {% endcomment %}
          </div>

          <div class="mb-5">
            <p class="fw-bolder"> Your name <span class="fw-normal">  </span>
            </p>
            <div class="d-flex gap-3 align-items-center">
              <input type="text" name="name" class="form-control width-200 border-radius" id="id" aria-describedby="idHelp" placeholder="First name" />
              <input type="text" name="country" class="form-control width-200 border-radius" id="idd" aria-describedby="iddHelp" placeholder="Your country" />

              {% comment %} <div class="form-check form-switch">
                <input class="form-check-input" type="checkbox" id="flexSwitch" checked />
              </div> {% endcomment %}

          </div>
        <div id="idlsdHelp" class="form-text text-danger">Error message</div>
          </div>



        <div class="mb-5">
            <p class="fw-bolder" name="city"> City <span class="fw-normal"> (fixed options from HTML page) </span></p>
            <div class="dropdown d-inline w-150">
                <button class="btn btn-outline-secondary dropdown-toggle" type="button" id="dropdownMenuButton2" data-bs-toggle="dropdown" aria-expanded="false">
                    Select City
                </button>
                <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton2">
                    <li><a class="dropdown-item" name="Delhi">Delhi</a></li>
                    <li><a class="dropdown-item" name="Gurgaon">Gurgaon</a></li>
                    <li><a class="dropdown-item" name="Bangalore">Bangalore</a></li>
                </ul>
            </div>
            {% comment %} <div id="idlHelp" class="form-text text-danger">Error message</div> {% endcomment %}
        </div>

        <script>
          // Select the dropdown items
          document.querySelectorAll('.dropdown-menu a').forEach(item => {
              item.addEventListener('click', function (e) {
                  e.preventDefault(); // Prevent the default anchor behavior
                  var selectedCity = this.getAttribute('data-value'); // Get the value of the selected item
                  var dropdownButton = document.getElementById('dropdownMenuButton2');
                  dropdownButton.textContent = this.textContent; // Change the button text to the selected item

                  // Update the hidden input field
                  document.getElementById('hiddenCityInput').value = selectedCity;
              });
          });
        </script>

        <script>
          function saveRadioSelection(selectedColor) {
              // Retrieve the CSRF token value
              var csrftoken = document.querySelector('[name=csrfmiddlewaretoken]').value;

              fetch('/form1/views/save_radio_selection/', {
                  method: 'POST',
                  headers: {
                      'Content-Type': 'application/json',
                      'X-CSRFToken': csrftoken  // Include the CSRF token in the request headers
                  },
                  body: JSON.stringify({color: selectedColor})
              }).then(response => {
                  if(response.redirected) {
                      window.location.href = response.url;
                  } else {
                      return response.json();
                  }
              }).then(data => {
                  // Handle the response data
                  console.log(data);
              }).catch(error => {
                  console.error('Error:', error);
              });
          }

          // Example usage: saveRadioSelection('red');
      </script>




      <div class="mb-5">
        <div class="d-flex gap-3">
            <p class="fw-bolder" name="ratings">Star Rating</p>
            <div id="ratingid" class="form-text text-danger"> Error message </div>
        </div>
        <span class="fa fa-star" name="1" onclick="setRating(1)"></span>
        <span class="fa fa-star" name="2" onclick="setRating(2)"></span>
        <span class="fa fa-star" name="3" onclick="setRating(3)"></span>
        <span class="fa fa-star" name="4" onclick="setRating(4)"></span>
        <span class="fa fa-star" name="5" onclick="setRating(5)"></span>
    </div>

<!-- In your Django template -->
<script>
  function sendRating() {
      var ratingValue = ...; // Get the rating value

      // Get the CSRF token from the cookie
      var csrftoken = getCookie('csrftoken');

      fetch('/form1/views/save_rating/', {
          method: 'POST',
          headers: {
              'Content-Type': 'application/json',
              'X-CSRFToken': csrftoken
          },
          body: JSON.stringify({rating: ratingValue})
      }).then(response => response.json()).then(data => {
          console.log(data); // Process the response
      });
  }

  function getCookie(name) {
      let cookieValue = null;
      if (document.cookie && document.cookie !== '') {
          const cookies = document.cookie.split(';');
          for (let i = 0; i < cookies.length; i++) {
              const cookie = cookies[i].trim();
              if (cookie.substring(0, name.length + 1) === (name + '=')) {
                  cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                  break;
              }
          }
      }
      return cookieValue;
  }
</script>


          <div class="mb-5">
            <div class="d-flex gap-5">
              <div class="me-5">
                <p class="fw-bolder d-inline-block me-2" name="Radi">Radio</p>
                {% comment %} <span id="idlHelp" class="form-text text-danger"> Error message </span> {% endcomment %}
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="Red" id="flexRadioDefault1" />
                  <label class="form-check-label" for="flexRadioDefault1"> Red </label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="Green" id="flexRadioDefault2" />
                  <label class="form-check-label" for="flexRadioDefault2"> Green </label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="Blue" id="flexRadioDefault3" />
                  <label class="form-check-label" for="flexRadioDefault3" > Blue </label>
                </div>
              </div>
          <div>
                <p class="fw-bolder d-inline-block me-2" name="Check">Checkbox</p>
                <span id="idlHelp" class="form-text text-danger"> Error message </span>
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault1" />
                  <label class="form-check-label" for="flexCheckDefault"> check1</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault2" />
                  <label class="form-check-label" for="flexCheckDefault"> check2 </label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault3" />
                  <label class="form-check-label" for="flexCheckDefault"> check3 </label>
                </div>
              </div>
            </div>
          </div>
          <div class="mb-5">
            <p class="fw-bolder">Description</p>
            <textarea class="form-control border-radius textarea-width" id="exampleFormControlTextarea1" rows="3" placeholder="lorem loremloremloremloremloremloremloremloremloremloremloremloremlorem"></textarea>
            <div id="idlHelp" class="form-text text-danger">Error message</div>
          </div>
          <div class="mb-5">
            <div class="d-flex gap-3 align-items-center">
              <div>
                <p class="fw-bolder">Website URL</p>
                <input type="url" class="form-control width-200 border-radius" id="id" aria-describedby="idHelp" placeholder="Website" />
                <div id="idlHelp" class="form-text text-danger"> Error message </div>
              </div>
              <div>
                <p class="fw-bolder">Website name (sliced from URL)</p>
                <input type="text" class="form-control width-200 border-radius" id="id" aria-describedby="idHelp" placeholder="Website" />
                <div id="idlHelp" class="form-text text-danger"> Error message </div>
              </div>
            </div>
          </div>
          <div class="mb-5">
            <div class="d-flex gap-3 align-items-center">
              <div>
                <p class="fw-bolder">Website Search</p>
                <input type="text" class="form-control width-200 border-radius" id="id" aria-describedby="idHelp" placeholder="Website" />
                <div id="idlHelp" class="form-text text-danger"> Error message </div>
              </div>
              <div>
                <p class="fw-bolder">Date Picker</p>
                <input id="startDate" class="form-control width-200" type="date" />
                <div id="idlHelp" class="form-text text-danger"> Error message </div>
              </div>
            </div>
          </div>
        </div>



    <div class="d-flex mt-4 justify-content-between">
          <div>
            {% comment %} <input type="submit" value="login" class="btn btn-block btn-info" /> {% endcomment %}

            <input type="submit" value="save"  class="btn btn-outline-secondary fw-bolder"></button>
            <button type="button" class="btn btn-outline-secondary fw-bolder"> Save via API </button>
          </div>
            <button type="button" class="btn btn-outline-secondary bg-green fw-bolder"> Next </button>
    </div>


  </div>





{% comment %}

      <div class="width-30">
        <div class="d-flex justify-content-between">
          <div class="dropdown d-inline">
            <button class="btn btn-outline-secondary dropdown-toggle custom-dropdown" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false"> Select Field Type </button>
            <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
              <li>
                <a class="dropdown-item" href="#">Action</a>
              </li>
              <li>
                <a class="dropdown-item" href="#">Another action</a>
              </li>
              <li>
                <a class="dropdown-item" href="#">Something else here</a>
              </li>
            </ul>
          </div>
          <div>
            <div class="dropdown d-inline">
              <button class="btn btn-outline-secondary dropdown-toggle custom-dropdown" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false"> Select ID </button>
              <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
                <li>
                  <a class="dropdown-item" href="#">Action</a>
                </li>
                <li>
                  <a class="dropdown-item" href="#">Another action</a>
                </li>
                <li>
                  <a class="dropdown-item" href="#">Something else here</a>
                </li>
              </ul>
            </div>
            <button type="button" class="btn btn-outline-secondary bg-blue-200 font-weight-bold fw-bolder"> Fetch </button>
            <button type="button" class="btn btn-outline-secondary bg-yellow font-weight-bold fw-bolder"> Get </button>
          </div>
        </div>
        <div class="mt-4 border-custom p-4 pb-5">
          <div style="margin-bottom: 100px">
            <p class="fw-bolder m-0">Form ID</p>
            <p>23</p>
          </div>
          <div style="margin-bottom: 120px">
            <p class="fw-bolder m-0">Your name</p>
            <span class="me-5">First name</span>
            <span>Last name</span>
          </div>
          <div style="margin-bottom: 100px">
            <p class="fw-bolder m-0">City</p>
            <p>City name</p>
          </div>
          <div style="margin-bottom: 100px">
            <p class="fw-bolder m-0">Star Rating</p>
            <p>2/5</p>
          </div>
          <div class="mt-4 d-flex gap-5" style="margin-bottom: 100px">
            <div>
              <p class="fw-bolder m-0">Radio</p>
              <p>lorem</p>
            </div>
            <div>
              <p class="fw-bolder m-0">Checkbox</p>
              <p>lorem, lorem ,lorem</p>
            </div>
          </div>
          <div style="margin-bottom: 120px">
            <p class="fw-bolder m-0">Description</p>
            <p>lorem</p>
          </div>
          <div class="mt-4 d-flex gap-5" style="margin-bottom: 100px">
            <div>
              <p class="fw-bolder m-0">Website</p>
              <p>lore</p>
            </div>
            <div>
              <p class="fw-bolder m-0">Website name</p>
              <p>lorem, lorem ,lorem</p>
            </div>
          </div>
          <div class="mt-4 d-flex gap-5" style="margin-bottom: 80px">
            <div>
              <p class="fw-bolder m-0">Website Search</p>
              <p>lore</p>
            </div>
            <div>
              <p class="fw-bolder m-0">Date</p>
              <p>lorem</p>
            </div>
          </div>
        </div>

 {% endcomment %}




      </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

    <script src="{% static 'main.js' %}"></script>
  </form>
  </body>
</html>
